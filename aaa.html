<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Advanced Image Enhancer</title>

<style>
body{
    font-family: Arial, sans-serif;
    text-align:center;
    background:#1e1e1e;
    color:white;
    margin:0;
    padding:0;
}
header{
    background:#2b2b2b;
    padding:15px;
    box-shadow:0 0 10px black;
    border-bottom:2px solid #2196f3;
}
header h2{
    margin:5px 0;
}
header p{
    margin:0;
    font-size:16px;
    color:#ccc;
}
.container{
    width: 80%;
    margin:auto;
    background:#2b2b2b;
    padding:20px;
    border-radius:10px;
    box-shadow:0 0 20px black;
    margin-top:20px;
}
canvas{
    margin-top:15px;
    border:3px solid #555;
    border-radius:10px;
    background:black;
    max-width:100%;
}
.control-box{
    text-align:left;
    margin-top:20px;
    background:#333;
    padding:15px;
    border-radius:10px;
}
input[type=range]{
    width:100%;
}
button{
    padding:10px 18px;
    margin:5px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
    transition:0.3s;
}
button:hover{
    opacity:0.85;
}
.action{background:#2196f3;color:white;}
.reset{background:#f44336;color:white;}
.download{background:#4caf50;color:white;}
</style>

</head>
<body>

<header>
<h2>ğŸŒŸ Advanced Image Enhancer</h2>
<p>Ø§Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø·Ø§Ù„Ø¨: Ø¬Ø¹ÙØ± Ø¹Ø¨Ø¯Ø§Ù„ÙƒØ§Ø¸Ù… - Ø§Ù„Ø§ÙˆÙ„ Ø§Ù„Ù…ØªÙˆØ³Ø· - Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„ÙˆØ§Ø¦Ù„ÙŠ Ù„Ù„Ù…ØªÙ…ÙŠØ²ÙŠÙ†</p>
</header>

<div class="container">

<input type="file" id="upload" accept="image/*"><br>

<canvas id="canvas"></canvas>

<div class="control-box">

<h3>Adjustments</h3>
<label>Brightness</label>
<input type="range" id="brightness" min="50" max="200" value="100">

<label>Contrast</label>
<input type="range" id="contrast" min="50" max="200" value="100">

<label>Saturation</label>
<input type="range" id="saturation" min="50" max="200" value="100">

<label>Blur</label>
<input type="range" id="blur" min="0" max="10" value="0">

<label>Rotation (Â°)</label>
<input type="range" id="rotationSlider" min="0" max="360" value="0">

<label>
<input type="checkbox" id="bw">
Black & White
</label>

<label>
<input type="checkbox" id="sepia">
Sepia
</label>

<label>
<input type="checkbox" id="invert">
Invert Colors
</label>

<hr>

<h3>Transform</h3>
<button class="action" onclick="flipH()">Flip Horizontal</button>
<button class="action" onclick="flipV()">Flip Vertical</button>

<hr>

<button class="reset" onclick="resetAll()">Reset</button>
<button class="download" id="downloadBtn">Download Image</button>

</div>
</div>

<script>
let upload = document.getElementById("upload");
let canvas = document.getElementById("canvas");
let ctx = canvas.getContext("2d");
let img = new Image();

let rotation = 0;
let flipHorizontal = 1;
let flipVertical = 1;

upload.addEventListener("change", function(){
    let file = upload.files[0];
    let reader = new FileReader();
    reader.onload = function(e){
        img.src = e.target.result;
    }
    reader.readAsDataURL(file);
});

img.onload = function(){
    canvas.width = img.width > 800 ? 800 : img.width; // Ø¶Ø¨Ø· Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
    canvas.height = img.height > 600 ? 600 : img.height;
    drawImage();
}

function drawImage(){
    let brightness = document.getElementById("brightness").value;
    let contrast = document.getElementById("contrast").value;
    let saturation = document.getElementById("saturation").value;
    let blur = document.getElementById("blur").value;
    let bw = document.getElementById("bw").checked;
    let sepia = document.getElementById("sepia").checked;
    let invert = document.getElementById("invert").checked;
    rotation = parseInt(document.getElementById("rotationSlider").value);

    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.save();

    // Transform
    ctx.translate(canvas.width/2, canvas.height/2);
    ctx.scale(flipHorizontal, flipVertical);
    ctx.rotate(rotation * Math.PI / 180);
    ctx.translate(-canvas.width/2, -canvas.height/2);

    // Filters
    ctx.filter = 
        `brightness(${brightness}%) contrast(${contrast}%) 
        saturate(${saturation}%) blur(${blur}px)
        ${bw ? "grayscale(100%)" : ""}
        ${sepia ? "sepia(100%)" : ""}
        ${invert ? "invert(100%)" : ""}`;

    ctx.drawImage(img,0,0,canvas.width,canvas.height);
    ctx.restore();
}

// ØªØ­Ø¯ÙŠØ« Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø£ÙŠ Ù‚ÙŠÙ…Ø©
document.querySelectorAll("input").forEach(input=>{
    input.addEventListener("input", drawImage);
});

function flipH(){
    flipHorizontal *= -1;
    drawImage();
}

function flipV(){
    flipVertical *= -1;
    drawImage();
}

function resetAll(){
    rotation = 0;
    flipHorizontal = 1;
    flipVertical = 1;

    document.getElementById("brightness").value = 100;
    document.getElementById("contrast").value = 100;
    document.getElementById("saturation").value = 100;
    document.getElementById("blur").value = 0;
    document.getElementById("bw").checked = false;
    document.getElementById("sepia").checked = false;
    document.getElementById("invert").checked = false;
    document.getElementById("rotationSlider").value = 0;

    drawImage();
}

document.getElementById("downloadBtn").onclick = function(){
    let link = document.createElement("a");
    link.download = "enhanced-image.png";
    link.href = canvas.toDataURL();
    link.click();
}
</script>

</body>
</html>
